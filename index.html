<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Who Can Sound Like...</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#699eb0" />
  <link rel="icon" type="image/png" href="https://www.dropbox.com/scl/fi/52zdcavuv8onkzli5nqb5/WCSLgraphic.png?rlkey=5v4dj1j6qmg218daxx37nbbty&st=p4a8ug87&raw=1">
  <link rel="apple-touch-icon" href="https://www.dropbox.com/scl/fi/52zdcavuv8onkzli5nqb5/WCSLgraphic.png?rlkey=5v4dj1j6qmg218daxx37nbbty&st=p4a8ug87&raw=1">

  <style>
    :root{
      --cream:#fff9f3; --ink:#3c3c3c; --brand:#127490;
      --accent:#b24627; --accent-2:#c95e3c; --dash:#f8b934; --muted:#6b7f88;
    }
    body {
      background: var(--cream);
      font-family: 'Poppins', sans-serif;
      text-align: center;
      padding: 2rem;
      color: var(--ink);
      margin: 0;
    }
    .logo { max-width: 150px; margin-bottom: 1rem; }
    h1 { color: var(--brand); margin-bottom: 0.5rem; font-weight: 600; font-size: 1.6rem; }
    #prompt {
      margin: 2rem auto;
      font-size: 1.25rem;
      padding: 1.5rem;
      background: rgba(255,255,255,.95);
      border-radius: 16px;
      border: 2px dashed var(--dash);
      max-width: 90%;
      min-height: 120px;
      backdrop-filter: blur(6px);
    }
    .btns { display:flex; gap:.5rem; justify-content:center; flex-wrap:wrap; margin-top:1rem; }
    button {
      background-color: var(--accent);
      color: #fff;
      border: none;
      padding: 1rem 1.2rem;
      border-radius: 30px;
      font-size: 1.05rem;
      cursor: pointer;
      font-weight: 600;
      box-shadow: 0 4px 12px rgba(0,0,0,.08);
    }
    button:hover { background-color: var(--accent-2); }
    button[disabled]{ opacity:.5; cursor:not-allowed; }
    .btn-secondary{ background:#ffe9d6; color:#6b3a28; }
    .btn-secondary:hover{ background:#ffdcbf; }

    .cover {
      margin-top: 2rem;
      width: 250px;
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }

    footer { font-size: .9rem; color: #777; margin-top: 3rem; max-width: 90%; margin-inline:auto; }

    /* Courtesy overlay (unchanged) */
    #courtesyOverlay {
      position: fixed; inset: 0;
      background: rgba(0,0,0,.4);
      display: none; place-items: center;
      z-index: 9999; opacity: 1; transition: opacity .3s ease;
    }
    .courtesy-card {
      width: min(560px, 92%);
      background: #fff;
      color: var(--ink);
      border-radius: 18px;
      box-shadow: 0 12px 40px rgba(0,0,0,.18);
      padding: 22px;
      text-align: left;
    }
    .courtesy-card h2 { margin: 0 0 8px; color: var(--brand); font-size: 20px; }
    .courtesy-card p { margin: 6px 0 14px; color: #666; }
    .courtesy-check { display:flex; align-items:center; gap:10px; margin: 6px 0 12px; }
    #courtesyContinue {
      width: 100%; padding: 12px 14px; border: 0; border-radius: 14px; font-weight: 700; cursor: pointer;
      background: var(--accent); color: #fff; box-shadow: 0 4px 14px rgba(0,0,0,.08);
    }
    #courtesyContinue:disabled { opacity: .5; cursor: not-allowed; }

    /* Favorites area */
    #favWrap{ max-width:860px; margin:2rem auto 0; text-align:left; }
    #favHeader{ display:flex; align-items:center; justify-content:space-between; gap:8px; }
    #favHeader h3{ margin:0; color:#7a3e2e; font-size:1.1rem; }
    #favList{
      list-style:none; padding:0; margin:12px 0 0;
      display:grid; grid-template-columns:1fr; gap:10px;
    }
    .favItem{
      background:#fff; border:1px solid #ffdcbf; border-radius:14px; padding:12px 14px;
      display:flex; justify-content:space-between; align-items:flex-start; gap:12px;
      box-shadow:0 2px 8px rgba(0,0,0,.04);
    }
    .favText{ font-size:.98rem; line-height:1.35rem; }
    .favActions{ display:flex; gap:8px; flex-shrink:0; }
    .iconBtn{
      border:0; background:#ffe9d6; color:#6b3a28; padding:.45rem .7rem; border-radius:10px; font-size:.9rem; cursor:pointer;
    }
    .iconBtn:hover{ background:#ffdcbf; }
    .muted{ color:var(--muted); font-size:.9rem; }

    /* Tiny toast */
    #toast{
      position:fixed; left:50%; bottom:24px; transform:translateX(-50%);
      background:#127490; color:#fff; padding:10px 14px; border-radius:12px;
      box-shadow:0 8px 24px rgba(0,0,0,.18); opacity:0; pointer-events:none;
      transition:opacity .25s ease, transform .25s ease;
      font-size:.95rem; z-index:9999;
    }
    #toast.show{ opacity:1; transform:translateX(-50%) translateY(-4px); }
  </style>
</head>
<body>

  <!-- One-time courtesy reminder overlay -->
  <section id="courtesyOverlay" role="dialog" aria-labelledby="courtesyTitle" aria-modal="true">
    <div class="courtesy-card">
      <h2 id="courtesyTitle">Thanks for supporting this work</h2>
      <p>Please do not share this link.</p>
      <label class="courtesy-check">
        <input type="checkbox" id="courtesyAck" />
        <span>I understand — got it!</span>
      </label>
      <button id="courtesyContinue" disabled>Continue</button>
    </div>
  </section>

  <!-- App content -->
  <div id="generator">
    <img src="WCSLgraphic.png" alt="Who Can Sound Like logo" class="logo" />
    <h1>WHO CAN SOUND LIKE...? from Playful Heart Parenting</h1>

    <!-- Row 1 -->
    <div class="btns">
      <button id="btnNext">Who can sound like…</button>
    </div>
    <!-- Row 2 -->
    <div class="btns">
      <button id="btnBack">Back</button>
      <button id="btnFwd">Forward</button>
    </div>
    <!-- Row 3 -->
    <div class="btns">
      <button id="btnSave" class="btn-secondary">Save to Favorites</button>
    </div>

    <div id="prompt">Tap the button to get a random prompt and do your best impression! No wrong answers. Just go for it!</div>

    <footer>
      © 2025 Mia Wisinski, Playful Heart Parenting. This app is for personal use only by those who have purchased from Playful Heart Parenting. Please do not share this link publicly or distribute without explicit permission.
    </footer>

    <div style="margin-top: 2rem;">
      <h2>Submit Your Own!</h2>
      <p style="font-size: 1rem; max-width: 600px; margin: 0 auto;">
        Got an idea for your own funny or creative "Who Can Sound Like..." prompt? We’d love to hear it! Click below to submit — we may feature it in a future update and credit your first name.
      </p>
      <button onclick="window.open('https://docs.google.com/forms/d/e/1FAIpQLSdO_J0n5DbwSbXDJpWv9N35y9VcGbweaOKVt3JOHu3xvaZ3dA/viewform?usp=sharing&ouid=100680857929677229636', '_blank')" style="margin-top: 1rem;">
        Submit Your Idea
      </button>
    </div>
  </div>

  <!-- Favorites list -->
  <section id="favWrap" aria-labelledby="favTitle">
    <div id="favHeader">
      <h3 id="favTitle">Favorites</h3>
      <div class="btns" style="margin-top:0;">
        <button class="btn-secondary" id="btnCopyAll">Copy All</button>
        <button class="btn-secondary" id="btnClear">Clear</button>
      </div>
    </div>
    <p class="muted" id="favEmpty">No favorites yet. Save any you love.</p>
    <ul id="favList"></ul>
  </section>

  <!-- Tiny toast -->
  <div id="toast" role="status" aria-live="polite"></div>

  <script>
    /* One-time courtesy reminder */
    (function(){
      const COURTESY_KEY = 'wcsl_courtesy_v1';
      const overlay = document.getElementById('courtesyOverlay');
      const ack     = document.getElementById('courtesyAck');
      const goBtn   = document.getElementById('courtesyContinue');

      if (localStorage.getItem(COURTESY_KEY) !== 'yes') {
        overlay.style.display = 'grid';
        ack.addEventListener('change', ()=>{ goBtn.disabled = !ack.checked; });
        goBtn.addEventListener('click', ()=>{
          localStorage.setItem(COURTESY_KEY, 'yes');
          overlay.style.opacity = '0';
          setTimeout(()=>{ overlay.style.display='none'; overlay.style.opacity='1'; }, 320);
        });
      }
    })();

    /* Prompts */
    const prompts = [
      "A flamingo influencer who is showing off her wing extensions",
      "A rooster trying to act cool in front of his ex-girlfriend from across the barnyard",
      "A vulture who missed his alarm and overslept and just showed up late to the vulture picnic and all the good stuff is gone",
      "A mouse minding their own business when someone steps on their tail",
      "A chipmunk professor giving a lecture about snacks, and they’re nervous because it’s their first day on the job, but they’re trying to act confident",
      "Two snakes telling each other hilarious jokes",
      "An owl on a job interview",
      "Two chickens sitting on their eggs trying to talk to each other but not wanting to wake their babies",
      "A bumblebee who just discovered the most beautiful flower in the neighborhood and is calling all its friends over",
      "A pigeon who just stubbed its toe on a trash can and it’s trying to hold it together in front of its kids",
      "A baby lion that just woke up from its nap and wants to play",
      "A mommy whale telling its child to stop eating seaweed",
      "A cat getting pet by its owner after a long day",
      "A baby horse neighing for the first time",
      "A squirrel who just found out her favorite brand of acorns is being discontinued",
      "An impatient construction truck backing up",
      "A garbage truck picking up garbage and almost spilled a bunch but didn’t",
      "A washing machine that has too many towels in it",
      "A monkey that just accidentally bumped into a panda and is running back crying to its mom",
      "Thunder and rain in a thunderstorm",
      "A dragon trying to roar, but it has a sore throat",
      "A baby dinosaur roaring for the first time",
      "A baby tiger sneaking up on its parents",
      "A pig that is so happy and relaxed while it rolls in the mud on a hot day",
      "A cow mooing in the back of a classroom trying not to get caught by the teacher",
      "A peaceful waterfall",
      "A shy fart",
      "A rude fart",
      "A fart that someone thought was going to be silent but ended up being a loud squeak",
      "A whoopee cushion getting used for the first time",
      "A sheep asking if she can get a discount on a sweater",
      "A phone so excited to be ringing because nobody’s called it in a while",
      "A chicken hairstylist talking to another chicken while she styles her feathers",
      "A platypus playing the trumpet in a marching band",
      "A whale opera singer",
      "A 75-year old cow",
      "A baby gorilla begging its mommy for a snack",
      "A sparrow singing a good morning song to everyone in the neighborhood",
      "A bunch of mice arguing over how old a piece of cheese was",
      "A robot horse trying to neigh",
      "A teenage elephant ordering a pizza",
      "All the different kinds of fruit in a fruit salad meeting each other for the first time",
      "A rockstar rooster giving a concert",
      "A cranky duck getting a foot massage",
      "Two ducks sampling different types of bread at a pond",
      "The turkey that won the international gobbling contest",
      "An angry cow who just stepped on a Lego",
      "A parrot singing the alphabet",
      "A little firework that doesn’t realize how big he is until he explodes",
      "A sloth giving directions to the nearest gas station",
      "A chicken that accidentally climbed aboard a rocket ship and is getting blasted off into space",
      "A nervous chipmunk ordering a latte at the cafe",
      "A bird singing a lullaby to its babies",
      "A mouse trying to squeak as loud as it can even though it’s really really tiny",
      "All the animals at the zoo talking at the same time",
      "All the animals at a farm talking at the same time",
      "A goat who just heard the funniest joke in the world",
      "A chicken who is so embarrassed because they accidentally just laid an egg in the middle of an exercise class",
      "A 100-year old goat chatting with her friends but she keeps falling asleep mid-goat-sentence",
      "A dinosaur softly roaring a lullaby to its baby",
      "A warthog giving a makeup tutorial",
      "A stray cat trying to wake up the whole neighborhood at midnight just for fun",
      "A shy squirrel asking another squirrel if it wants to share a sandwich with her",
      "An eagle soaring through the sky and announcing that he is about to poop so “Lookout below!”",
      "A grumpy bear who is annoyed that his little brother ate all the honey and didn’t save any for him",
      "A whole hive of happy honeybees working hard to make honey",
      "A big fat sleepy fly who ate way too much icing off the top of a cupcake at a birthday party and is trying party but keeps falling asleep",
      "A puppy dog super excited to be going on its first walk ever",
      "A fortune telling goat warning another goat that tomorrow she will mysteriously lose one of her earrings",
      "A squeaky door finally getting fixed and not squeaking anymore",
      "A fish trying to swim through jello",
      "A snake who just found out he didn’t get the lead role in the middle school play",
      "A car that’s trying to start but can’t",
      "A microwave beeping rudely for the tenth time because you keep forgetting to go get your food",
      "An opera singing duck who just stepped on a sharp splinter",
      "A duck who just won the swimming race at the pond",
      "A drum set getting played for the very first time",
      "A trumpet that’s tired and doesn’t really want to be played",
      "A sleepy snail who keeps hitting snooze on his alarm in the morning",
      "A bear who just drank a whole bottle of soda and can’t stop burping",
      "A blueberry bagel who’s trying to talk a kid out of eating him",
      "A raccoon with the hiccups",
      "A crying sheep who can’t find its lucky sock",
      "A stinky foot who’s begging its owner to wash it",
      "The horn on a bus that keeps making random, different-sounding honks each time",
      "A clock ticking louder and louder before the alarm goes off",
      "A rooster trying to crow extra loudly to wake everyone up but he’s also a little bit shy",
      "A mommy cow mooing a lullaby to her baby",
      "A sheep singer baa-ing her newest hit",
      "A pig snorting with happiness while it eats the best lunch ever",
      "An angry duck quacking after a goose stole its bread",
      "A goose honking its ABCs",
      "A donkey going hee-haw on a see-saw",
      "A horse who just got scared of its own shadow",
      "A really grumpy cat meowing at everyone to get away from it",
      "An excited dog barking at the mailman",
      "A wolf puppy howling at the moon",
      "A lion cub learning how to roar",
      "A baby tiger purring because it’s getting its back scratched",
      "An excited monkey who just found a tree full of ripe bananas",
      "A confused toad who forgot how to croak and keeps making the wrong sound",
      "A very sleepy frog who’s trying to stay awake past his bedtime",
      "A crank crow cawing to try and scare away the other birds in the garden",
      "An owl trying to tell a secret to the owl in the next tree over",
      "A rude parrot squawking for a snack",
      "A seagull arguing with another seagull over who gets the leftover sandwich on the beach",
      "A dolphin squeaking with laughter after another dolphin just told it a funny joke",
      "A whale singer giving an underwater concert to all the fish",
      "A baby seal barking for its parents to come watch it do a trick",
      "An excited pelican squawking because it just caught a fish but it also has its mouth full",
      "A hyena laughing at a funny movie",
      "A bunch of coyote babies howling for their mommy to bring them a snack",
      "A happy raccoon chittering because it just found a dumpster full of food trash",
      "A squeaky squirrel dad giving a lecture to its kids",
      "A shy rabbit squeaking hello to its new classmates on the first day of rabbit school",
      "A car horn honking in traffic but it’s trying to honk out a song",
      "A choo-choo train announcing that it’s so proud of how much stuff it’s carrying",
      "A grumpy dishwasher full of yucky dirty dishes that it’s washing",
      "A vacuum cleaner roaring and laughing as it picks up all the dirt and crumbs on the floor",
      "A squeaky, creaky floorboard that keeps getting stepped on",
      "A roll of bubble wrap that is getting stomped on by kids",
      "A balloon squeaking as it lets out air and flies all over the room",
      "A fart that sounds like a trumpet playing a tune",
      "A robot chicken laying an egg",
      "A proud firetruck on it’s way to put out a fire",
      "A baby hippo who just got the hiccups",
      "A whale with the hiccups",
      "A donkey with the hiccups",
      "A snake who is learning how to hiss",
      "A gentle breeze blowing through the trees on a spring day",
      "A whole crowd of kids at a playground",
      "Two grumpy rhinos snorting at each other to move over",
      "A gorilla with a stuffy nose",
      "An elevator dinging proudly as it stops on each floor",
      "A walrus barking loudly to show off his big tusks",
      "A little peacock who just wants some attention but nobody is listening",
      "A hen clucking at her babies to come eat dinner",
      "A flamingo squawking because it keeps losing its balance",
      "A really tired camel grumbling after a long walk",
      "A moose grunting “Good Morning” to its best moose friend",
      "A porcupine warning everyone to back up or it’ll poke them",
      "A hamster squeaking for a treat",
      "A scared armadillo squeaking as it rolls into a little ball",
      "A meerkat barking to warn its friends that a storm is coming",
      "A sealion barking at another sealion to get off of his rock",
      "A mouse chattering with its mouse friends at a party",
      "A zipper on a jacket zipping up and down to show off how fast it can zip",
      "A very busy stapler stapling a bunch of paperwork",
      "A soda can opening with a great big fizzy popping sound",
      "A whistle blowing at the start of a race",
      "A tired computer keyboard being typed on",
      "The squeaky wheel on a wagon calling out for someone to fix it",
      "An ice cream truck driving down the street blasting its music",
      "A grumpy dinosaur who is not happy with its new claw polish",
      "A very friendly pigeon cooing hello to all the other pigeons on the rooftop",
      "A cranky bulldog who can’t find his favorite bone",
      "An 80-year old chicken who can’t believe she’s still bawking",
      "A sad, sad cow who is crying over spilled milk",
      "A really excited chimpanzee who just stole someone’s iced coffee at the zoo and has a LOT of extra energy now",
      "A super-sleepy lion grandpa who’s trying to stay awake to play with the grandkids but keeps falling asleep"
    ];

    /* ---------- Persistent deck shuffle + history + favorites ---------- */
    const APP_NS = 'wcsl';
    const K = (s)=>`${APP_NS}_${s}`;
    const KEY_VER=K('ver'), KEY_ORDER=K('order'), KEY_IDX=K('idx'), KEY_HIST=K('hist'), KEY_HPOS=K('hpos'), KEY_FAVS=K('favs');

    const elPrompt=document.getElementById('prompt');
    const btnBack=document.getElementById('btnBack');
    const btnFwd=document.getElementById('btnFwd');
    const btnNext=document.getElementById('btnNext');
    const btnSave=document.getElementById('btnSave');

    const favListEl=document.getElementById('favList');
    const favEmptyEl=document.getElementById('favEmpty');
    const btnCopyAll=document.getElementById('btnCopyAll');
    const btnClear=document.getElementById('btnClear');
    const toastEl=document.getElementById('toast');

    function hashText(t){ let h=0; for(let i=0;i<t.length;i++) h=(h*31+t.charCodeAt(i))>>>0; return h.toString(36); }
    function shuffle(a){ for(let i=a.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [a[i],a[j]]=[a[j],a[i]];} return a; }
    function freshOrder(avoidIdx){
      const order = shuffle(Array.from({length:prompts.length},(_,i)=>i));
      if (avoidIdx!=null && prompts.length>1 && order[0]===avoidIdx){
        const k = 1 + Math.floor(Math.random()*(order.length-1));
        [order[0],order[k]]=[order[k],order[0]];
      }
      return order;
    }

    const PROMPTS_VERSION = hashText(JSON.stringify(prompts));
    function saveState(s){
      localStorage.setItem(KEY_VER, PROMPTS_VERSION);
      localStorage.setItem(KEY_ORDER, JSON.stringify(s.order));
      localStorage.setItem(KEY_IDX, String(s.idx));
      localStorage.setItem(KEY_HIST, JSON.stringify(s.history));
      localStorage.setItem(KEY_HPOS, String(s.hpos));
    }
    function loadState(){
      const ver = localStorage.getItem(KEY_VER);
      let s = { order:null, idx:0, history:[], hpos:0 };
      if (ver === PROMPTS_VERSION){
        try{
          s.order   = JSON.parse(localStorage.getItem(KEY_ORDER) || 'null');
          s.idx     = parseInt(localStorage.getItem(KEY_IDX) || '0',10) || 0;
          s.history = JSON.parse(localStorage.getItem(KEY_HIST) || '[]');
          s.hpos    = parseInt(localStorage.getItem(KEY_HPOS) || String(s.history.length),10) || s.history.length;
        }catch{}
      }
      if (!Array.isArray(s.order) || s.order.length !== prompts.length){
        s.order=freshOrder(null); s.idx=0; s.history=[]; s.hpos=0;
      } else {
        s.idx  = Math.min(Math.max(0,s.idx), Math.max(0,s.order.length-1));
        s.hpos = Math.min(Math.max(0,s.hpos), s.history.length);
        s.history = s.history.filter(n=>Number.isInteger(n) && n>=0 && n<prompts.length);
      }
      saveState(s); return s;
    }
    let STATE = loadState();

    function show(i){ elPrompt.textContent = prompts[i]; }
    function updateNav(){ btnBack.disabled = STATE.hpos<=1; btnFwd.disabled = STATE.hpos>=STATE.history.length; }
    function currentIndex(){
      if (!STATE.history.length || STATE.hpos===0) return null;
      return STATE.hpos===STATE.history.length ? STATE.history[STATE.history.length-1] : STATE.history[STATE.hpos-1];
    }
    function pickNextFromDeck(){
      let {order, idx} = STATE;
      const next = order[idx];
      idx++;
      if (idx >= order.length){ const avoid=next; order=freshOrder(avoid); idx=0; }
      STATE.order=order; STATE.idx=idx;
      return next;
    }

    function next(){
      elPrompt.textContent = 'Here you go...!';
      setTimeout(()=>{
        if (STATE.hpos < STATE.history.length) STATE.history.splice(STATE.hpos);
        const pick = pickNextFromDeck();
        STATE.history.push(pick);
        if (STATE.history.length>500) STATE.history.splice(0, STATE.history.length-500);
        STATE.hpos = STATE.history.length;
        show(pick); updateNav(); saveState(STATE); updateSaveBtn();
      }, 300);
    }
    function back(){
      if (STATE.hpos>1){
        STATE.hpos -= 1;
        show(STATE.history[STATE.hpos-1]); updateNav(); saveState(STATE); updateSaveBtn();
      }
    }
    function forward(){
      if (STATE.hpos<STATE.history.length){
        const idx = STATE.history[STATE.hpos];
        STATE.hpos += 1;
        show(idx); updateNav(); saveState(STATE); updateSaveBtn();
      }
    }

    /* Favorites */
    function loadFavs(){ try { return JSON.parse(localStorage.getItem(KEY_FAVS)||'[]'); } catch { return []; } }
    function saveFavs(list){ localStorage.setItem(KEY_FAVS, JSON.stringify(list)); }
    let FAVORITES = loadFavs();
    function isFav(i){ return FAVORITES.includes(i); }
    function updateSaveBtn(){
      const i = currentIndex();
      if (i==null){ btnSave.disabled=true; btnSave.textContent='Save to Favorites'; return; }
      btnSave.disabled=false; btnSave.textContent = isFav(i) ? 'Saved' : 'Save to Favorites';
    }
    function saveCurrent(){
      const i = currentIndex(); if (i==null) return;
      if (!isFav(i)){ FAVORITES.push(i); saveFavs(FAVORITES); renderFavs(); toast('Saved to favorites'); updateSaveBtn(); }
      else { toast('Already in favorites'); }
    }
    function removeFav(i){
      FAVORITES = FAVORITES.filter(n=>n!==i); saveFavs(FAVORITES);
      renderFavs(); updateSaveBtn(); toast('Removed');
    }
    function renderFavs(){
      favListEl.innerHTML=''; if (!FAVORITES.length){ favEmptyEl.style.display='block'; return; }
      favEmptyEl.style.display='none';
      FAVORITES.forEach(i=>{
        const li=document.createElement('li'); li.className='favItem';
        const txt=document.createElement('div'); txt.className='favText'; txt.textContent=prompts[i];
        const actions=document.createElement('div'); actions.className='favActions';
        const copyBtn=document.createElement('button'); copyBtn.className='iconBtn'; copyBtn.textContent='Copy';
        copyBtn.onclick=()=>{ navigator.clipboard.writeText(prompts[i]); toast('Copied'); };
        const delBtn=document.createElement('button'); delBtn.className='iconBtn'; delBtn.textContent='Remove';
        delBtn.onclick=()=> removeFav(i);
        actions.appendChild(copyBtn); actions.appendChild(delBtn);
        li.appendChild(txt); li.appendChild(actions); favListEl.appendChild(li);
      });
    }
    function copyAllFavs(){
      if (!FAVORITES.length){ toast('No favorites to copy'); return; }
      const text = FAVORITES.map(i=>prompts[i]).join('\n');
      navigator.clipboard.writeText(text); toast('Favorites copied');
    }
    function clearFavs(){
      FAVORITES=[]; saveFavs(FAVORITES); renderFavs(); updateSaveBtn(); toast('Favorites cleared');
    }

    /* Tiny toast */
    let toastTimer=null;
    function toast(msg){
      toastEl.textContent=msg; toastEl.classList.add('show');
      clearTimeout(toastTimer); toastTimer=setTimeout(()=>toastEl.classList.remove('show'), 1200);
    }

    /* Wire up */
    btnNext.addEventListener('click', next);
    btnBack.addEventListener('click', back);
    btnFwd .addEventListener('click', forward);
    btnSave.addEventListener('click', saveCurrent);
    document.getElementById('btnCopyAll').addEventListener('click', copyAllFavs);
    document.getElementById('btnClear').addEventListener('click', clearFavs);

    document.addEventListener('keydown', e=>{
      if (e.key==='Enter') next();
      if (e.key==='ArrowLeft') back();
      if (e.key==='ArrowRight') forward();
      if (e.key.toLowerCase()==='s') saveCurrent();
    });

    // On load
    if (STATE.history.length){ STATE.hpos=STATE.history.length; show(STATE.history[STATE.history.length-1]); }
    updateNav(); renderFavs(); updateSaveBtn(); saveState(STATE);
  </script>
</body>
</html>
